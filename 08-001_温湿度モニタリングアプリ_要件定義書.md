### 文書番号: 08-001

## 1. アプリ名
- アプリ名: 温湿度モニタリングアプリ

## 2. 概要
DHTシリーズセンサー（DHT11/DHT22等）を用いて、一定間隔で温度および湿度を取得し、コンソール表示またはCSVファイルへログ出力するPythonアプリケーションです。初心者向けに、センサーの読み取り・データ記録の基本を学ぶ演習教材として活用します。

## 3. 目的
- DHTセンサーからのデータ取得方法を習得する
- PythonによるI/O制御とデータ処理技術を学ぶ
- データの記録・可視化準備としてCSV出力手法を理解する

## 4. 対象利用者
- プログラミング初心者
- Raspberry Pi入門者
- センサー制御を学びたい電子工作学習者

## 5. システム構成
| コンポーネント       | 役割                             |
|----------------------|----------------------------------|
| Raspberry Pi 5       | センサー制御、スクリプト実行     |
| DHT11/DHT22センサー | 温度・湿度測定                   |
| ジャンパーワイヤ     | センサーとGPIOピンの接続         |
| microSDカード        | ログデータ（CSV）保存           |

## 6. ハードウェア要件
- Raspberry Pi 5本体
- microSDカード（Raspberry Pi OSインストール済み）
- DHT11またはDHT22センサー
- ジャンパーワイヤ（オス–オス）
- 抵抗（4.7kΩプルアップ、センサーによる）
- 電源（公式5V電源アダプタ）

## 7. ソフトウェア要件
- OS：Raspberry Pi OS（最新推奨）
- 言語：Python 3.9以上
- ライブラリ：
  - Adafruit_DHT
  - argparse（標準）
  - csv（標準）
  - time（標準）

## 8. 機能要件
1. **GPIO初期化**
   - 指定GPIOピンを読み取りモードに設定
2. **データ取得**
   - センサーから温度（℃）と湿度（％）を読み取る
3. **表示**
   - コンソールに現在の測定値とタイムスタンプを表示
4. **CSVログ出力**
   - 指定ファイルに`timestamp,temperature,humidity`の形式で追記
5. **取得間隔制御**
   - コマンドライン引数`--interval`（秒）で測定間隔を指定
   - デフォルト：10秒
6. **例外処理**
   - 読み取り失敗時にリトライまたはエラーメッセージ表示

## 9. 非機能要件
- **可読性**: PEP8準拠、適切なコメントを記載
- **保守性**: 関数分割により主要処理を明確化
- **単一ファイル完結**: 可能な限り一つのPythonファイルで完結する設計とする
- **耐久性**: 長時間実行時にメモリリークなし

## 10. テスト要件
- **センサーテスト**: DHT11/DHT22両方で正常に測定できる
- **間隔テスト**: `--interval`指定値で測定が行われること
- **CSV出力テスト**: ファイルに正しいフォーマットで追記されること
- **異常系テスト**: センサー未接続/読み取り失敗時の動作確認

## 11. 受け入れ基準
1. 指定間隔で温湿度データが正しく取得・表示される
2. CSVファイルに正しい形式でログが追記される
3. エラー発生時に適切なメッセージが表示される
4. 長時間実行後も安定して動作する

---
以上の要件をもとに、温湿度モニタリングアプリのプロトタイプを開発してください。
