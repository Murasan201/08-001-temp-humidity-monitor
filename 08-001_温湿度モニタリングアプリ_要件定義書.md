### 文書番号: 08-001

## 1. アプリ名
- アプリ名: 温湿度モニタリングアプリ

## 2. 概要
DHT11センサーを用いて温度・湿度を定期的に取得し、コンソール表示およびCSVログ出力を行うPythonスクリプトのセットです。初心者が段階的にセンサー読み取りとデータ記録の基礎を学べるよう、目的別に2つのスクリプトを提供します。

## 3. 目的
- DHTセンサーからのデータ取得方法を習得する
- PythonによるI/O制御とデータ処理技術を学ぶ
- データの記録・可視化準備としてCSV出力手法を理解する

## 4. 対象利用者
- プログラミング初心者
- Raspberry Pi入門者
- センサー制御を学びたい電子工作学習者

## 5. システム構成
| コンポーネント       | 役割                             |
|----------------------|----------------------------------|
| Raspberry Pi 5       | センサー制御、スクリプト実行     |
| DHT11センサー       | 温度・湿度測定                   |
| ジャンパーワイヤ     | センサーとGPIOピンの接続         |
| microSDカード        | OSおよびログデータ保存          |

## 6. ハードウェア要件
- Raspberry Pi 5本体
- microSDカード（Raspberry Pi OSインストール済み）
- DHT11センサー
- ジャンパーワイヤ（オス–オス）
- 抵抗（4.7kΩプルアップ、センサーによる）
- 電源（公式5V電源アダプタ）

## 7. ソフトウェア要件
- OS：Raspberry Pi OS（最新推奨）
- 言語：Python 3.9以上
- ライブラリ：
- Adafruit_DHT
- csv（標準）
- datetime（標準）
- time（標準）

## 8. 機能要件
1. **スクリプト構成**
   - `dht11_basic.py`: センサー値を2秒間隔で読み取り、コンソールに温度・湿度を表示する
   - `dht11_logger.py`: センサー値を60秒間隔で読み取り、タイムスタンプ付きでCSVファイルに記録する
2. **GPIO初期化**
   - DHT11センサーが接続されたGPIOピン（GPIO4）を読み取りに利用する
3. **データ取得**
   - センサーから温度（℃）と湿度（％）を取得し、読み取りエラー時は再試行まで待機する
4. **表示**
   - 取得したデータをコンソールに出力し、華氏換算値も表示する（基本版のみ）
5. **CSVログ出力**
   - `temperature_humidity_YYYY-MM-DD.csv`形式のファイルを日付ごとに作成し、`日時,温度(°C),湿度(%)`の形式で追記する（ロガー版のみ）
6. **測定間隔**
   - 基本版は固定2秒、ロガー版は固定60秒で測定する
7. **例外処理**
   - センサー読み取り時の`RuntimeError`を捕捉し、ユーザーにエラーメッセージを通知する

## 9. 非機能要件
- **可読性**: PEP8準拠、適切なコメントを記載
- **保守性**: 関数分割により主要処理を明確化
- **構成整理**: 機能別にシンプルな2ファイル構成（基本版・ロガー版）とし、コード重複を最小限に抑える
- **ログファイル管理**: CSVファイル名は日付ごとに自動分割される仕様を維持する
- **耐久性**: 長時間実行時にメモリリークなし

## 10. テスト要件
- **センサーテスト**: DHT11で正常に測定できる
- **間隔テスト**: 各スクリプトで規定の測定間隔（2秒／60秒）が守られる
- **CSV出力テスト**: ロガー版でファイルが作成され、正しいフォーマットで追記される
- **異常系テスト**: センサー未接続/読み取り失敗時の動作確認

## 11. 受け入れ基準
1. 基本版で2秒間隔の測定結果が正しく取得・表示される
2. ロガー版で60秒間隔の測定結果がCSVファイルに記録される
3. CSVファイルのフォーマットが仕様通りである
4. エラー発生時に適切なメッセージが表示される
5. 長時間実行後も安定して動作する

---
以上の要件をもとに、温湿度モニタリングアプリのプロトタイプを開発してください。
